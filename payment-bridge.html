<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DEBUG – UMA Payment Bridge</title>
<style>
    body { font-family: Arial; padding: 20px; }
    pre { background: #eee; padding: 10px; border-radius: 5px; }
    .ok { color: green; }
    .bad { color: red; }
</style>
</head>
<body>

<h2>DEBUG MODE – Data That Will Be Sent to UMA</h2>
<p>If any field is empty, malformed, or contains forbidden characters, UMA will reject the request.</p>

<pre id="debug"></pre>

<form id="paymentForm" method="POST" action="https://tpv.uma.es/icafr-2025/" style="display:none;">
    <input type="hidden" name="amount" id="amount">
    <input type="hidden" name="payment_concept" id="payment_concept">
    <input type="hidden" name="first_name" id="first_name">
    <input type="hidden" name="last_name" id="last_name">
    <input type="hidden" name="document_id" id="document_id">
</form>

<script>
    const p = new URLSearchParams(window.location.search);

    const amount = p.get("amount");
    const concept = p.get("payment_concept");
    const first = p.get("first_name");
    const last = p.get("last_name");
    const doc = p.get("document_id");

    // Fill form
    document.getElementById("amount").value = amount;
    document.getElementById("payment_concept").value = concept;
    document.getElementById("first_name").value = first;
    document.getElementById("last_name").value = last;
    document.getElementById("document_id").value = doc;

    // Show visually for debugging
    document.getElementById("debug").textContent =
        "amount: " + amount + "\n" +
        "payment_concept: " + concept + "\n" +
        "first_name: " + first + "\n" +
        "last_name: " + last + "\n" +
        "document_id: " + doc + "\n\n" +
        "Submitting in 10 seconds...";

    // Auto-submit after delay
    setTimeout(() => {
        document.getElementById("paymentForm").submit();
    }, 10000); // 10 sec to read the values
</script>

</body>
</html>
